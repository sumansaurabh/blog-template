<div class="container">
  
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#naive_bayes">Lesson 1: Naive Bayes</button>
  <div id="naive_bayes" class="collapse">
    <br>
    <a href="" ng-click="click_view('nb-exercise1', 'naive_bayes')"><h3>Exercise 1: GaussianNB Deployment on Terrain Data</h3></a>
    <div ng-if="curr_view==='nb-exercise1'">
      <h4 class="h4-code"> class_vis.py</h4>
      <pre>
        <code class="python">
          #!/usr/bin/python

          #from udacityplots import *
          import matplotlib 
          matplotlib.use('agg')

          import matplotlib.pyplot as plt
          import pylab as pl
          import numpy as np

          import base64
          import json
          import subprocess

          def prettyPicture(clf, X_test, y_test):
              x_min = 0.0; x_max = 1.0
              y_min = 0.0; y_max = 1.0

              # Plot the decision boundary. For that, we will assign a color to each
              # point in the mesh [x_min, m_max]x[y_min, y_max].
              h = .01  # step size in the mesh
              xx, yy = np.meshgrid(np.arange(x_min, x_max, h), np.arange(y_min, y_max, h))
              Z = clf.predict(np.c_[xx.ravel(), yy.ravel()])

              # Put the result into a color plot
              #matplotlib inline
              Z = Z.reshape(xx.shape)
              plt.xlim(xx.min(), xx.max())
              plt.ylim(yy.min(), yy.max())

              plt.pcolormesh(xx, yy, Z, cmap=pl.cm.seismic)

              # Plot also the test points
              grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]
              bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]
              grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]
              bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]

              plt.scatter(grade_sig, bumpy_sig, color = "b", label="fast")
              plt.scatter(grade_bkg, bumpy_bkg, color = "r", label="slow")
              plt.legend()
              plt.xlabel("bumpiness")
              plt.ylabel("grade")

              #plt.savefig("test.png")
              
          def output_image(name, format, bytes):
              image_start = "BEGIN_IMAGE_f9825uweof8jw9fj4r8"
              image_end = "END_IMAGE_0238jfw08fjsiufhw8frs"
              data = {}
              data['name'] = name
              data['format'] = format
              data['bytes'] = base64.encodestring(bytes)
              print image_start+json.dumps(data)+image_end
        </code>
      </pre>
      <h4 class="h4-code">prep_terrain_data.py</h4>
      <pre>
        <code class="python">
          #!/usr/bin/python
          import random


          def makeTerrainData(n_points=1000):
          ### make the toy dataset
              random.seed(42)
              grade = [random.random() for ii in range(0,n_points)]
              bumpy = [random.random() for ii in range(0,n_points)]
              error = [random.random() for ii in range(0,n_points)]
              y = [round(grade[ii]*bumpy[ii]+0.3+0.1*error[ii]) for ii in range(0,n_points)]
              for ii in range(0, len(y)):
                  if grade[ii]>0.8 or bumpy[ii]>0.8:
                      y[ii] = 1.0

          ### split into train/test sets
              X = [[gg, ss] for gg, ss in zip(grade, bumpy)]
              split = int(0.75*n_points)
              X_train = X[0:split]
              X_test  = X[split:]
              y_train = y[0:split]
              y_test  = y[split:]

              grade_sig = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==0]
              bumpy_sig = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==0]
              grade_bkg = [X_train[ii][0] for ii in range(0, len(X_train)) if y_train[ii]==1]
              bumpy_bkg = [X_train[ii][1] for ii in range(0, len(X_train)) if y_train[ii]==1]

          #    training_data = {"fast":{"grade":grade_sig, "bumpiness":bumpy_sig}
          #            , "slow":{"grade":grade_bkg, "bumpiness":bumpy_bkg}}


              grade_sig = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==0]
              bumpy_sig = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==0]
              grade_bkg = [X_test[ii][0] for ii in range(0, len(X_test)) if y_test[ii]==1]
              bumpy_bkg = [X_test[ii][1] for ii in range(0, len(X_test)) if y_test[ii]==1]

              test_data = {"fast":{"grade":grade_sig, "bumpiness":bumpy_sig}
                      , "slow":{"grade":grade_bkg, "bumpiness":bumpy_bkg}}

              return X_train, y_train, X_test, y_test
          #    return training_data, test_data
        </code>
      </pre>
      <h4 class="h4-code">ClassifyNB.py</h4>
      <pre>
        <code class="python">
          def classify(features_train, labels_train):   
          ### import the sklearn module for GaussianNB
          ### create classifier
          ### fit the classifier on the training features and labels
          ### return the fit classifier
          
              
          ### your code goes here!
          from sklearn.naive_bayes import GaussianNB
          clf = GaussianNB()
          clf.fit(features_train, labels_train)
          return clf
        </code>
      </pre>
      <h4 class="h4-code">studentMain.py</h4>
      <pre>
        <code class="python">
          #!/usr/bin/python

          """ Complete the code in ClassifyNB.py with the sklearn
              Naive Bayes classifier to classify the terrain data.
              
              The objective of this exercise is to recreate the decision 
              boundary found in the lesson video, and make a plot that
              visually shows the decision boundary """


          features_train, labels_train, features_test, labels_test = makeTerrainData()

          ### the training data (features_train, labels_train) have both "fast" and "slow" points mixed
          ### in together--separate them so we can give them different colors in the scatterplot,
          ### and visually identify them
          grade_fast = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==0]
          bumpy_fast = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==0]
          grade_slow = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==1]
          bumpy_slow = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==1]

          clf = classify(features_train, labels_train)

          ### draw the decision boundary with the text points overlaid
          prettyPicture(clf, features_test, labels_test)
          #output_image("test.png", "png", open("test.png", "rb").read())
        </code>
      </pre>
      <h3 class="h4-code">Output</h3>
      <img src="/img/images/GaussianNB.png">
    </div>
    <a href="" ng-click="click_view('nb-exercise2', 'naive_bayes')"><h3>Exercise 2: Calculating NB Accuracy</h3></a>
    <div ng-if="curr_view==='nb-exercise2'">
      <h4 class="h4-code">classify.py</h4>
      <pre>
        <code class="python">
          def NBAccuracy(features_train, labels_train, features_test, labels_test):
            """ compute the accuracy of your Naive Bayes classifier """
            ### import the sklearn module for GaussianNB
            from sklearn.naive_bayes import GaussianNB
            from sklearn.metrics import accuracy_score

            ### create classifier
            clf = GaussianNB()

            ### fit the classifier on the training features and labels
            clf.fit(features_train, labels_train)

            ### use the trained classifier to predict labels for the test features

            ###### method 1
            accuracy = clf.score(features_test, labels_test)
            
            ###### method 2
            pred = clf.predict(features_test)
            accuracy = accuracy_score(pred, labels_test)
            
            return accuracy
        </code>
      </pre>
      <h4 class="h4-code">studentCode.py</h4>
      <pre>
        <code class="python">
          features_train, labels_train, features_test, labels_test = makeTerrainData()

          def submitAccuracy():
              accuracy = NBAccuracy(features_train, labels_train, features_test, labels_test)
              return accuracy

          print submitAccuracy()
        </code>
      </pre>
      <h4 class="h4-code">Output</h4>
      <p>Output -: 0.884</p>
    </div>
    <a href="" ng-click="click_view('nb-exercise3', 'author_id_accuracy')"><h3>Exercise 3: Author ID Accuracy</h3></a>
    <div ng-if="curr_view==='nb-exercise3'">
      <h4 class="h4-code">nb_author_id.py</h4>
      <pre>
        <code class="python">
          #!/usr/bin/python

          """ 
          This is the code to accompany the Lesson 1 (Naive Bayes) mini-project. 

          Use a Naive Bayes Classifier to identify emails by their authors
          
          authors and labels:
          Sara has label 0
          Chris has label 1
          """

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/naive_bayes')

          import sys
          from time import time

          sys.path.append("../tools/")
          from email_preprocess import preprocess


          ### features_train and features_test are the features for the training
          ### and testing datasets, respectively
          ### labels_train and labels_test are the corresponding item labels
          features_train, features_test, labels_train, labels_test = preprocess()

          #########################################################
          ### your code goes here ###
          
          from sklearn.metrics import accuracy_score

          def train(feature_train, label_train):
            from sklearn.naive_bayes import GaussianNB

            clf = GaussianNB()
            # train
            t0 = time()
            clf.fit(features_train, labels_train)
            print "\nTraining time:", round(time()-t0, 3), "s"
            return clf

          # predict
          t0 = time()
          pred = train(features_train, labels_train).predict(features_test)
          print "Predicting time:", round(time()-t0, 3), "s"
          
          accuracy = accuracy_score(pred, labels_test)
          print '\naccuracy = {0}'.format(accuracy)
          
        </code>
      </pre>
      <h4 class="h4-code">Output</h4>
      <p>
        no. of Chris training emails: 7936<br>
        no. of Sara training emails: 7884<br>
        <br>
        training time: 1.33 s<br>
        predicting time: 0.203 s<br>

        accuracy = 0.973265073948<br>
      </p>
    </div>
  </div>

  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#svm">Lesson 2: SVM</button>
  <div id="svm" class="collapse">
    <br>
    <a href="" ng-click="click_view('svm-exercise1', 'svm')"><h3>Exercise 1: SVM in SKlearn</h3></a>
    <div ng-if="curr_view==='svm-exercise1'">
      <h4 class="h4-code">SVM in SKlearn</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/svm')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/svm')


          from class_vis import prettyPicture
          from prep_terrain_data import makeTerrainData

          import sys
          import matplotlib.pyplot as plt
          import copy
          import numpy as np
          import pylab as pl

          from sklearn.metrics import accuracy_score


          features_train, labels_train, features_test, labels_test = makeTerrainData()


          ########################## SVM #################################
          from sklearn.svm import SVC

          def submitAccuracy():
              return accuracy_score(pred, labels_test)

          clf = SVC(kernel="linear")
          clf.fit(features_train, labels_train)
          pred = clf.predict(features_test)

          print accuracy_score(pred, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span>0.92</span>
      </div>
    </div>

    <a href="" ng-click="click_view('svm-exercise2', 'svm')"><h3>Exercise 2: Kernel and Gamma</h3></a>
    <div ng-if="curr_view==='svm-exercise2'">
      <h4 class="h4-code">Kernel and Gamma</h4>
      <pre>
        <code class="python">
          clf = SVC(kernel="linear", gamma=1.0)
          clf.fit(features_train, labels_train)
          pred = clf.predict(features_test)

          %matplotlib inline
          prettyPicture(clf, features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span><img src="/img/images/kernel_gamma.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('svm-exercise3', 'svm')"><h3>Exercise 3: SVM C Parameter</h3></a>
    <div ng-if="curr_view==='svm-exercise3'">
      <h4 class="h4-code">SVM C Parameter</h4>
      <pre>
        <code class="python">
          clf = SVC(kernel="rbf", C=10**5)
          clf.fit(features_train, labels_train)
          pred = clf.predict(features_test)

          %matplotlib inline
          prettyPicture(clf, features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span<img src="/img/images/svm_c_param.png">></span>
      </div>
    </div>

    <a href="" ng-click="click_view('svm-exercise4', 'svm')"><h3>Exercise 4: SVM gamma Parameter</h3></a>
    <div ng-if="curr_view==='svm-exercise4'">
      <h4 class="h4-code">SVM gamma Parameter</h4>
      <pre>
        <code class="python">
          clf = SVC(kernel="rbf", gamma=10)
          clf.fit(features_train, labels_train)
          pred = clf.predict(features_test)

          %matplotlib inline
          prettyPicture(clf, features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span><img src="/img/images/svm_gamma_param.png"></span>
      </div>
    </div>


    <a href="" ng-click="click_view('svm-exercise5', 'svm')"><h3>Exercise 5: SVM Author ID Accuracy & Timing</h3></a>
    <div ng-if="curr_view==='svm-exercise5'">
      <h4 class="h4-code">SVM Author ID Accuracy & Timing</h4>
      <pre>
        <code class="python">

          #!/usr/bin/python

          """ 
              This is the code to accompany the Lesson 2 (SVM) mini-project.

              Use a SVM to identify emails from the Enron corpus by their authors:    
              Sara has label 0
              Chris has label 1
          """
          from sklearn.metrics import accuracy_score

          from time import time
          from email_preprocess import preprocess


          ### features_train and features_test are the features for the training
          ### and testing datasets, respectively
          ### labels_train and labels_test are the corresponding item labels
          features_train, features_test, labels_train, labels_test = preprocess()


          def my_svm(features_train, features_test, labels_train, labels_test, kernel='linear', C=1.0):
              # the classifier
              clf = SVC(kernel=kernel, C=C)

              # train
              t0 = time()
              clf.fit(features_train, labels_train)
              print "\ntraining time:", round(time()-t0, 3), "s"

              # predict
              t0 = time()
              pred = clf.predict(features_test)
              print "predicting time:", round(time()-t0, 3), "s"

              accuracy = accuracy_score(pred, labels_test)

              print '\naccuracy = {0}'.format(accuracy)
              return pred

          pred = my_svm(features_train, features_test, labels_train, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b></span>
        <pre class="comment">
          <code>
            No. of Chris Training emails: 7936
            No. of Sara Training emails: 7884

            Training time: 176.156 s
            Predicting time: 18.561 s

            Accuracy = 0.984072810011
          </code>
        </pre>
        <span></span>
      </div>
    </div>

    <a href="" ng-click="click_view('svm-exercise6', 'svm')"><h3>Exercise 6: A Smaller Training Set</h3></a>
    <div ng-if="curr_view==='svm-exercise6'">
      <h4 class="h4-code">A Smaller Training Set</h4>
      <pre>
        <code class="python">
          features_train2 = features_train[:len(features_train)/100] 
          labels_train2 = labels_train[:len(labels_train)/100] 

          pred = my_svm(features_train2, features_test, labels_train2, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span></span>
        <pre class="comment">
          <code>
            Training time: 0.124 s
            Predicting time: 1.123 s

            Accuracy = 0.884527872582
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('svm-exercise7', 'svm')"><h3>Exercise 7: Deploy an RBF Kernel</h3></a>
    <div ng-if="curr_view==='svm-exercise7'">
      <h4 class="h4-code">Deploy an RBF Kernel</h4>
      <pre>
        <code class="python">
          pred = my_svm(features_train2, features_test, labels_train2, labels_test, 'rbf')
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span></span>
        <pre class="comment">
          <code>
            Training time: 0.128 s
            Predicting time: 1.246 s

            Accuracy = 0.616040955631
          </code>
        </pre>
      </div>
    </div>


    <a href="" ng-click="click_view('svm-exercise8', 'svm')"><h3>Exercise 8: Optimize C Parameter</h3></a>
    <div ng-if="curr_view==='svm-exercise8'">
      <h4 class="h4-code">Optimize C Parameter</h4>
      <pre>
        <code class="python">
          for C in [10, 100, 1000, 10000]:
            print 'C =',C,
            pred = my_svm(features_train2, features_test, labels_train2, labels_test, kernel='rbf', C=C)
            print '\n\n'
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span></span>
        <pre class="comment">
          <code>
            C = 10 
          Training time: 0.133 s
          Predicting time: 1.245 s

          accuracy = 0.616040955631



          C = 100 
          Training time: 0.109 s
          Predicting time: 1.244 s

          accuracy = 0.616040955631



          C = 1000 
          Training time: 0.109 s
          Predicting time: 1.19 s

          accuracy = 0.821387940842



          C = 10000 
          Training time: 0.11 s
          Predicting time: 1.006 s

          Accuracy = 0.892491467577
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('svm-exercise9', 'svm')"><h3>Exercise 9: Optimized RBF vs. Linear SVM: Accuracy</h3></a>
    <div ng-if="curr_view==='svm-exercise9'">
      <h4 class="h4-code">Optimized RBF vs. Linear SVM: Accuracy</h4>
      <pre>
        <code class="python">
          pred = my_svm(features_train, features_test, labels_train, labels_test, kernel='rbf', C=10000)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span></span>
        <pre class="comment">
          <code>
            Training time: 116.73 s
            Predicting time: 11.745 s

            Accuracy = 0.990898748578

            
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('svm-exercise10', 'svm')"><h3>Exercise 10: Extracting Predictions from an SVM</h3></a>
    <div ng-if="curr_view==='svm-exercise10'">
      <h4 class="h4-code">Extracting Predictions from an SVM</h4>
      <pre>
        <code class="python">
          print pred[10]
          print pred[26]
          print pred[50]
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> <span></span>
        <pre class="comment">
          <code>
            print pred[10] = 1
            print pred[26] = 0
            print pred[50] = 1
          </code>
        </pre>
      </div>
    </div>  

    <a href="" ng-click="click_view('svm-exercise11', 'svm')"><h3>Exercise 11: How many Chris emails predicted?</h3></a>
    <div ng-if="curr_view==='svm-exercise11'">
      <h4 class="h4-code">How many Chris emails predicted?</h4>
      <pre>
        <code class="python">
          print sum(pred)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span> 877<span></span>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#d_tree">Lesson 3: Decision Tree</button>
  <div id="d_tree" class="collapse">
    <a href="" ng-click="click_view('d_tree-exercise1', 'd_tree')"><h3>Exercise 1: Coding a Decision Tree</h3></a>
    <div ng-if="curr_view==='d_tree-exercise1'">
      <h4 class="h4-code">Coding a Decision Tree</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/svm')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/decision_tree')


          """ lecture and example code for decision tree unit """

          import sys
          from class_vis import prettyPicture, output_image
          from prep_terrain_data import makeTerrainData

          import matplotlib.pyplot as plt
          import numpy as np
          import pylab as pl

          from sklearn import tree

          features_train, labels_train, features_test, labels_test = makeTerrainData()


          #def classify(features_train, labels_train, **kwargs):
          #    clf = tree.DecisionTreeClassifier(**kwargs)
          #    clf = clf.fit(features_train, labels_train)
          #    return clf


          ### the classify() function in classifyDT is where the magic
          ### happens--it's your job to fill this in!
          clf = tree.DecisionTreeClassifier()
          clf = clf.fit(features_train, labels_train)



          #### grader code, do not modify below this line
          %matplotlib inline
          prettyPicture(clf, features_test, labels_test)
          #output_image("test.png", "png", open("test.png", "rb").read())
          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="/img/images/coding_decision_tree.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise2', 'd_tree')"><h3>Exercise 2: Decision Tree Accuracy</h3></a>
    <div ng-if="curr_view==='d_tree-exercise2'">
      <h4 class="h4-code">Decision Tree Accuracy</h4>
      <pre>
        <code class="python">
          features_train, labels_train, features_test, labels_test = makeTerrainData()

          ########################## DECISION TREE #################################


          ### your code goes here--now create 2 decision tree classifiers,
          ### one with min_samples_split=2 and one with min_samples_split=50
          ### compute the accuracies on the testing data and store
          ### the accuracy numbers to acc_min_samples_split_2 and
          ### acc_min_samples_split_50, respectively

          clf2 = tree.DecisionTreeClassifier(min_samples_split=2)
          clf2 = clf2.fit(features_train, labels_train)

          clf50 = tree.DecisionTreeClassifier(min_samples_split=50)
          clf50 = clf50.fit(features_train, labels_train)
          #clf50 = classify(features_train, labels_train, min_samples_split=50)
          #clf = tree.DecisionTreeClassifier(min_samples_split=50).fit(features_train, labels_train)

          acc_min_samples_split_2 = clf2.score(features_test, labels_test)
          acc_min_samples_split_50 = clf50.score(features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.908</span>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise3', 'd_tree')"><h3>Exercise 3: Entropy Calculation Part 5</h3></a>
    <div ng-if="curr_view==='d_tree-exercise3'">
      <h4 class="h4-code">Entropy Calculation Part 5</h4>
      <pre>
        <code class="python">
          import scipy.stats

          pk = [0.5, 0.5]
          print scipy.stats.entropy(pk, base=2)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>1.0</span>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise4', 'd_tree')"><h3>Exercise 4: Information Gain Calculation Part 5</h3></a>
    <div ng-if="curr_view==='d_tree-exercise4'">
      <h4 class="h4-code">Information Gain Calculation Part 5</h4>
      <pre>
        <code class="python">
          print scipy.stats.entropy([1,2], base=2)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.918295834054</span>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise5', 'd_tree')"><h3>Exercise 5: Information Gain Calculation Part 6</h3></a>
    <div ng-if="curr_view==='d_tree-exercise5'">
      <h4 class="h4-code">Information Gain Calculation Part 6</h4>
      <pre>
        <code class="python">
          print 1-0.75*scipy.stats.entropy([1,2], base=2)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.311278124459</span>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise6', 'd_tree')"><h3>Exercise 6: Your First Email DT: Accuracy</h3></a>
    <div ng-if="curr_view==='d_tree-exercise6'">
      <h4 class="h4-code">Your First Email DT: Accuracy</h4>
      <pre>
        <code class="python">
          """ 
              This is the code to accompany the Lesson 3 (decision tree) mini-project.

              Use a Decision Tree to identify emails from the Enron corpus by author:    
              Sara has label 0
              Chris has label 1
          """
              
          from time import time
          from email_preprocess import preprocess


          ### features_train and features_test are the features for the training
          ### and testing datasets, respectively
          ### labels_train and labels_test are the corresponding item labels
          features_train, features_test, labels_train, labels_test = preprocess()




          #########################################################
          ### your code goes here ###
          clf = tree.DecisionTreeClassifier(min_samples_split=40)
          clf = clf.fit(features_train, labels_train)

          print clf.score(features_test, labels_test)
          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            No. of Chris Training Emails: 7936
            No. of Sara Training Emails: 7884
            0.978384527873
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise7', 'd_tree')"><h3>Exercise 7: Speeding Up Via Feature Selection 1</h3></a>
    <div ng-if="curr_view==='d_tree-exercise7'">
      <h4 class="h4-code">Speeding Up Via Feature Selection 1</h4>
      <pre>
        <code class="python">
          print features_train.shape
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>(15820L, 3785L)</span>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise8', 'd_tree')"><h3>Exercise 8: Changing the Number of Features</h3></a>
    <div ng-if="curr_view==='d_tree-exercise8'">
      <h4 class="h4-code">Changing the Number of Features</h4>
      <pre>
        <code class="python">
          # I made "percentile" an input argument for preprocess with default value 10
          features_train, features_test, labels_train, labels_test = preprocess(percentile=1)
          print features_train.shape
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            No. of Chris Training emails: 7936
            No. of Sara Training emails: 7884
            (15820L, 379L)
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('d_tree-exercise9', 'd_tree')"><h3>Exercise 9: Accuracy Using 1% of Features</h3></a>
    <div ng-if="curr_view==='d_tree-exercise9'">
      <h4 class="h4-code">Accuracy Using 1% of Features</h4>
      <pre>
        <code class="python">
          clf = tree.DecisionTreeClassifier(min_samples_split=40)
          clf = clf.fit(features_train, labels_train)

          print clf.score(features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.967007963595</span>
      </div>
    </div>    
  </div>

  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#own_algo">Lesson 4: Choose Your Own Algorithm</button>
  <div id="own_algo" class="collapse">
    <br>
    <a href="" ng-click="click_view('own_algo-exercise1', 'own_algo')"><h3>Exercise 1: Choose Your Own Algorithm</h3></a>
    <div ng-if="curr_view==='own_algo-exercise1'">
      <h4 class="h4-code">Choose Your Own Algorithm</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')


          import matplotlib.pyplot as plt
          from prep_terrain_data import makeTerrainData
          from class_vis import prettyPicture

          features_train, labels_train, features_test, labels_test = makeTerrainData()


          ### the training data (features_train, labels_train) have both "fast" and "slow"
          ### points mixed together--separate them so we can give them different colors
          ### in the scatterplot and identify them visually
          grade_fast = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==0]
          bumpy_fast = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==0]
          grade_slow = [features_train[ii][0] for ii in range(0, len(features_train)) if labels_train[ii]==1]
          bumpy_slow = [features_train[ii][1] for ii in range(0, len(features_train)) if labels_train[ii]==1]


          #### initial visualization
          %matplotlib inline
          plt.xlim(0.0, 1.0)
          plt.ylim(0.0, 1.0)
          plt.scatter(bumpy_fast, grade_fast, color = "b", label="fast")
          plt.scatter(grade_slow, bumpy_slow, color = "r", label="slow")
          plt.legend()
          plt.xlabel("bumpiness")
          plt.ylabel("grade")
          plt.show()
          ################################################################################


          ### your code here!  name your classifier object clf if you want the 
          ### visualization code (prettyPicture) to show you the decision boundary

          # import the classifiers
          from sklearn.neighbors import KNeighborsClassifier
          from sklearn.ensemble import AdaBoostClassifier, RandomForestClassifier
          from sklearn.tree import DecisionTreeClassifier
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="/img/images/choosing_own_algo.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('own_algo-exercise2', 'own_algo')"><h3>Exercise 2: kNN</h3></a>
    <div ng-if="curr_view==='own_algo-exercise2'">
      <h4 class="h4-code">kNN</h4>
      <pre>
        <code class="python">
          clf = KNeighborsClassifier(n_neighbors=1)
          clf.fit(features_train, labels_train)

          # print the accuracy and display the decision boundary
          print 'Accuracy = {0}'.format(clf.score(features_test, labels_test))
          prettyPicture(clf, features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="/img/images/choosing_own_algo_knn.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('own_algo-exercise3', 'own_algo')"><h3>Exercise 3: Random Forest</h3></a>
    <div ng-if="curr_view==='own_algo-exercise3'">
      <h4 class="h4-code">Random Forest</h4>
      <pre>
        <code class="python">
          clf = RandomForestClassifier(n_estimators=100)
          clf = clf.fit(features_train, labels_train)

          # print the accuracy and display the decision boundary
          print 'Accuracy = {0}'.format(clf.score(features_test, labels_test))
          prettyPicture(clf, features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="/img/images/choosing_own_algo_rf.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('own_algo-exercise4', 'own_algo')"><h3>Exercise 4: AdaBoost</h3></a>
    <div ng-if="curr_view==='own_algo-exercise4'">
      <h4 class="h4-code">AdaBoost</h4>
      <pre>
        <code class="python">
          clf = AdaBoostClassifier(DecisionTreeClassifier(max_depth=1), n_estimators=200)
          clf = clf.fit(features_train, labels_train)

          # print the accuracy and display the decision boundary
          print 'Accuracy = {0}'.format(clf.score(features_test, labels_test))
          prettyPicture(clf, features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="/img/images/choosing_own_algo_adaboost.png"></span>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#dataset">Lesson 5: Datasets and Question</button>
  <div id="dataset" class="collapse">
    <a href="" ng-click="click_view('dataset-exercise1', 'dataset')"><h3>Exercise 1: Size of the Enron Dataset</h3></a>
    <div ng-if="curr_view==='dataset-exercise1'">
      <h4 class="h4-code">Size of the Enron Dataset</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import pickle

          enron_data = pickle.load(open("../final_project/final_project_dataset.pkl", "r"))
          print 'Number of people in the Enron dataset: {0}'.format(len(enron_data))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Number of people in the Enron dataset: 146
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise2', 'dataset')"><h3>Exercise 2: Features in the Enron Dataset</h3></a>
    <div ng-if="curr_view==='dataset-exercise2'">
      <h4 class="h4-code">Features in the Enron Dataset</h4>
      <pre>
        <code class="python">
          print 'Number of features for each person in the Enron dataset: {0}'.format(len(enron_data.values()[0]))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Number of features for each person in the Enron dataset: 21
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise3', 'dataset')"><h3>Exercise 3: Finding POI's in the Enron Data</h3></a>
    <div ng-if="curr_view==='dataset-exercise3'">
      <h4 class="h4-code">Finding POI's in the Enron Data</h4>
      <pre>
        <code class="python">
          pois = [x for x, y in enron_data.items() if y['poi']]
          print 'Number of POI\'s: {0}'.format(len(pois))
          #enron_data.items()[0]
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Number of POI's: 18
          </code>
        </pre>
      </div>
    </div>


    <a href="" ng-click="click_view('dataset-exercise4', 'dataset')"><h3>Exercise 4: Query the Dataset 1</h3></a>
    <div ng-if="curr_view==='dataset-exercise4'">
      <h4 class="h4-code">Query the Dataset 1</h4>
      <pre>
        <code class="python">
          # DELETE ME
          enron_data['PRENTICE JAMES']
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>{
             'bonus': 'NaN',
             'deferral_payments': 564348,
             'deferred_income': 'NaN',
             'director_fees': 'NaN',
             'email_address': 'james.prentice@enron.com',
             'exercised_stock_options': 886231,
             'expenses': 'NaN',
             'from_messages': 'NaN',
             'from_poi_to_this_person': 'NaN',
             'from_this_person_to_poi': 'NaN',
             'loan_advances': 'NaN',
             'long_term_incentive': 'NaN',
             'other': 'NaN',
             'poi': False,
             'restricted_stock': 208809,
             'restricted_stock_deferred': 'NaN',
             'salary': 'NaN',
             'shared_receipt_with_poi': 'NaN',
             'to_messages': 'NaN',
             'total_payments': 564348,
             'total_stock_value': 1095040
            }
          </code>
        </pre>
      </div>
      <pre>
        <code class="python">
          enron_data['PRENTICE JAMES']['total_stock_value']
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>1095040</span>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise5', 'dataset')"><h3>Exercise 5: Query the Dataset 2</h3></a>
    <div ng-if="curr_view==='dataset-exercise5'">
      <h4 class="h4-code">Query the Dataset 2</h4>
      <pre>
        <code class="python">
          enron_data['COLWELL WESLEY']['from_this_person_to_poi']
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>11</span>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise6', 'dataset')"><h3>Exercise 6: Query the Dataset 3</h3></a>
    <div ng-if="curr_view==='dataset-exercise6'">
      <h4 class="h4-code">Query the Dataset 3</h4>
      <pre>
        <code class="python">
          enron_data['SKILLING JEFFREY K']['exercised_stock_options']
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>19250000</span>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise7', 'dataset')"><h3>Exercise 7: Follow the Money</h3></a>
    <div ng-if="curr_view==='dataset-exercise7'">
      <h4 class="h4-code">Follow the Money</h4>
      <pre>
        <code class="python">
          names = ['SKILLING JEFFREY K', 'FASTOW ANDREW S', 'LAY KENNETH L']
          names_payments = {name:enron_data[name]['total_payments'] for name in names}
          print sorted(names_payments.items(), key=lambda x: x[1], reverse=True)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            [('LAY KENNETH L', 103559793), ('SKILLING JEFFREY K', 8682716), ('FASTOW ANDREW S', 2424083)]
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise8', 'dataset')"><h3>Exercise 8: Dealing with Unfilled Features</h3></a>
    <div ng-if="curr_view==='dataset-exercise8'">
      <h4 class="h4-code">Dealing with Unfilled Features</h4>
      <pre>
        <code class="python">
          import pandas as pd

          df = pd.DataFrame(enron_data)
          print 'Has salary data: {0}'.format(sum(df.loc['salary',:] != 'NaN'))
          print 'Has email: {0}'.format(sum(df.loc['email_address',:] != 'NaN'))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Has salary data: 95
            Has email: 111
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise9', 'dataset')"><h3>Exercise 9: Missing POI's 1</h3></a>
    <div ng-if="curr_view==='dataset-exercise9'">
      <h4 class="h4-code">Missing POI's 1</h4>
      <pre>
        <code class="python">
          # How many people in the E+F dataset (as it currently exists) have “NaN” for their total payments? 
          # What percentage of people in the dataset as a whole is this?

          isnan = sum(df.loc['total_payments',:]=='NaN')
          _,cols = df.shape
          print 'total_payments == \'NaN\': {0} people = {1:.2f}%'.format(isnan, 100.*isnan/cols)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            total_payments == 'NaN': 21 people = 14.38%
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('dataset-exercise10', 'dataset')"><h3>Exercise 10: Missing POI's 2</h3></a>
    <div ng-if="curr_view==='dataset-exercise10'">
      <h4 class="h4-code">Missing POI's 2</h4>
      <pre>
        <code class="python">
          isnan = sum(df.loc['total_payments',pois]=='NaN')
          print 'POI total_payments == \'NaN\': {0} people = {1:.2f}%'.format(isnan, 100.*isnan/len(pois))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            POI total_payments == 'NaN': 0 people = 0.00%
          </code>
        </pre>
      </div>
    </div>

  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#regression">Lesson 6: Regressions</button>
  <div id="regression" class="collapse">
    <a href="" ng-click="click_view('regression-exercise1', 'regression')"><h3>Exercise 1: Age/Net Worth Regression in sklearn</h3></a>
    <div ng-if="curr_view==='regression-exercise1'">
      <h4 class="h4-code">Age/Net Worth Regression in sklearn</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/regression')


          import numpy
          import matplotlib
          matplotlib.use('agg')

          import matplotlib.pyplot as plt
          from class_vis import prettyPicture, output_image

          from ages_net_worths import ageNetWorthData

          ages_train, ages_test, net_worths_train, net_worths_test = ageNetWorthData()


          from sklearn import linear_model

          def studentReg(ages_train, net_worths_train):
              reg = linear_model.LinearRegression()
              reg.fit(ages_train, net_worths_train)
              return reg


          reg = studentReg(ages_train, net_worths_train)

          %matplotlib inline
          plt.clf()
          plt.scatter(ages_train, net_worths_train, color="b", label="train data")
          plt.scatter(ages_test, net_worths_test, color="r", label="test data")
          plt.plot(ages_test, reg.predict(ages_test), color="black")
          plt.legend(loc=2)
          plt.xlabel("ages")
          plt.ylabel("net worths")
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/regression.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('regression-exercise2', 'regression')"><h3>Exercise 2: Now You Practice Extracting Information</h3></a>
    <div ng-if="curr_view==='regression-exercise2'">
      <h4 class="h4-code">Now You Practice Extracting Information</h4>
      <pre>
        <code class="python">
          reg = linear_model.LinearRegression()
          reg.fit(ages_train, net_worths_train)

          ### get Katie's net worth (she's 27)
          ### sklearn predictions are returned in an array, so you'll want to index into
          ### the output to get what you want, e.g. net_worth = predict([[27]])[0][0] (not
          ### exact syntax, the point is the [0] at the end). In addition, make sure the
          ### argument to your prediction function is in the expected format - if you get
          ### a warning about needing a 2d array for your data, a list of lists will be
          ### interpreted by sklearn as such (e.g. [[27]]).
          km_net_worth = reg.predict([[27]])[0][0]

          ### get the slope
          ### again, you'll get a 2-D array, so stick the [0][0] at the end
          slope = reg.coef_[0][0]

          ### get the intercept
          ### here you get a 1-D array, so stick [0] on the end to access
          ### the info we want
          intercept = reg.intercept_[0]


          ### get the score on test data
          test_score = reg.score(ages_test, net_worths_test)


          ### get the score on the training data
          training_score = reg.score(ages_train, net_worths_train)
        </code>
      </pre>
    </div>

    <a href="" ng-click="click_view('regression-exercise3', 'regression')"><h3>Exercise 3: Bonus Target and Features</h3></a>
    <div ng-if="curr_view==='regression-exercise3'">
      <h4 class="h4-code">Bonus Target and Features</h4>
      <pre>
        <code class="python">
          import pickle
          from feature_format import featureFormat, targetFeatureSplit

          dictionary = pickle.load( open("../final_project/final_project_dataset_modified.pkl", "r") )

          def finance_regression(dictionary, features_list, fit_test=False):
              data = featureFormat( dictionary, features_list, remove_any_zeroes=True)
              target, features = targetFeatureSplit( data )

              ### training-testing split needed in regression, just like classification
              from sklearn.cross_validation import train_test_split
              feature_train, feature_test, target_train, target_test = train_test_split(features, target, test_size=0.5, random_state=42)
              train_color = "b"
              test_color = "r"


              reg = linear_model.LinearRegression()
              reg.fit(feature_train, target_train)


              ### draw the scatterplot, with color-coded training and testing points
              import matplotlib.pyplot as plt
              for feature, target in zip(feature_test, target_test):
                  plt.scatter( feature, target, color=test_color ) 
              for feature, target in zip(feature_train, target_train):
                  plt.scatter( feature, target, color=train_color ) 

              ### labels for the legend
              plt.scatter(feature_test[0], target_test[0], color=test_color, label="test")
              plt.scatter(feature_test[0], target_test[0], color=train_color, label="train")


              # draw the regression line, once it's coded
              plt.plot( feature_test, reg.predict(feature_test) )
              plt.xlabel(features_list[1])
              plt.ylabel(features_list[0])
              plt.legend()
              
              if fit_test:
                  reg.fit(feature_test, target_test)
                  plt.plot(feature_train, reg.predict(feature_train), color="r") 
              
              return (reg, feature_train, target_train, feature_test, target_test)


          (reg, feature_train, target_train, feature_test, target_test) = finance_regression(dictionary, ["bonus", "salary"])
          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="/img/images/regression_bonus_target.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('regression-exercise4', 'regression')"><h3>Exercise 4: Extracting Slope and Intercept</h3></a>
    <div ng-if="curr_view==='regression-exercise4'">
      <h4 class="h4-code">Extracting Slope and Intercept</h4>
      <pre>
        <code class="python">
          print 'slope = {0}'.format(reg.coef_[0])
          print 'intercept = {0}'.format(reg.intercept_)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            slope = 5.44814028881
            intercept = -102360.543294
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('regression-exercise5', 'regression')"><h3>Exercise 5: Regression Score: Training Data</h3></a>
    <div ng-if="curr_view==='regression-exercise5'">
      <h4 class="h4-code">Regression Score: Training Data</h4>
      <pre>
        <code class="python">
          print 'score on training set = {0}'.format(reg.score(feature_train, target_train))          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            score on training set = 0.0455091926995            
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('regression-exercise6', 'regression')"><h3>Exercise 6: Regression Score: Test Data</h3></a>
    <div ng-if="curr_view==='regression-exercise6'">
      <h4 class="h4-code">Regression Score: Test Data</h4>
      <pre>
        <code class="python">
          print 'score on test set = {0}'.format(reg.score(feature_test, target_test))          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            score on test set = -1.48499241737            
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('regression-exercise7', 'regression')"><h3>Exercise 7: Regressing Bonus Against LTI</h3></a>
    <div ng-if="curr_view==='regression-exercise7'">
      <h4 class="h4-code">Regressing Bonus Against LTI</h4>
      <pre>
        <code class="python">
          (reg, feature_train, target_train, feature_test, target_test) = finance_regression(dictionary, ['bonus', 'long_term_incentive'])          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/regression_bonus_against_lti.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('regression-exercise8', 'regression')"><h3>Exercise 8: Sneak Peek: Outliers Break Regressions</h3></a>
    <div ng-if="curr_view==='regression-exercise8'">
      <h4 class="h4-code">Sneak Peek: Outliers Break Regressions</h4>
      <pre>
        <code class="python">
          (reg, feature_train, target_train, feature_test, target_test) = finance_regression(dictionary, ["bonus", "salary"], fit_test=True)
          print 'slope = {0}'.format(reg.coef_[0])
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="/img/images/regression_bonus_slope.png"></span>
        <pre class="comment">
          <code>
            slope = 2.27410114127
          </code>
        </pre>
      </div>
    </div>
  </div>


  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#outliers">Lesson 7: Outliers</button>
  <div id="outliers" class="collapse">
    <a href="" ng-click="click_view('outliers-exercise1', 'outliers')"><h3>Exercise 1: Slope of Regression with Outliers</h3></a>
    <div ng-if="curr_view==='outliers-exercise1'">
      <h4 class="h4-code">Slope of Regression with Outliers</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/outliers')

          import random
          import numpy
          import matplotlib.pyplot as plt
          import pickle

          from outlier_cleaner import outlierCleaner


          ### load up some practice data with outliers in it
          ages = pickle.load( open("practice_outliers_ages.pkl", "r") )
          net_worths = pickle.load( open("practice_outliers_net_worths.pkl", "r") )

          ### ages and net_worths need to be reshaped into 2D numpy arrays
          ### second argument of reshape command is a tuple of integers: (n_rows, n_columns)
          ### by convention, n_rows is the number of data points
          ### and n_columns is the number of features
          ages       = numpy.reshape( numpy.array(ages), (len(ages), 1))
          net_worths = numpy.reshape( numpy.array(net_worths), (len(net_worths), 1))
          from sklearn.cross_validation import train_test_split
          ages_train, ages_test, net_worths_train, net_worths_test = train_test_split(ages, net_worths, test_size=0.1, random_state=42)


          # fit a linear regression
          from sklearn import linear_model

          reg = linear_model.LinearRegression()
          reg.fit(ages_train, net_worths_train)

          print 'slope = {0}'.format(reg.coef_[0][0])


          %matplotlib inline
          plt.plot(ages, reg.predict(ages), color="blue")
          plt.scatter(ages, net_worths)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/outliers_slope.png"></span>
        <pre class="comment">
          <code>
            slope = 5.07793064344
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('outliers-exercise1', 'outliers')"><h3>Exercise 2: Score of Regression with Outliers</h3></a>
    <div ng-if="curr_view==='outliers-exercise2'">
      <h4 class="h4-code">Score of Regression with Outliers</h4>
      <pre>
        <code class="python">
          print 'score = {0}'.format(reg.score(ages_test, net_worths_test))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            score = 0.878262478835
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('outliers-exercise1', 'outliers')"><h3>Exercise 3: Slope After Cleaning</h3></a>
    <div ng-if="curr_view==='outliers-exercise3'">
      <h4 class="h4-code">Slope After Cleaning</h4>
      <pre>
        <code class="python">
          def outlierCleaner(predictions, ages, net_worths):
              """
                  Clean away the 10% of points that have the largest
                  residual errors (difference between the prediction
                  and the actual net worth).

                  Return a list of tuples named cleaned_data where 
                  each tuple is of the form (age, net_worth, error).
              """
              errors = net_worths-predictions
              threshold = numpy.percentile(numpy.absolute(errors), 90)
              #print threshold
              #print numpy.max(numpy.absolute(errors))
              #print numpy.sort(numpy.absolute(errors), axis=0)
              
              cleaned_data = [(age, net_worth, error) for age, net_worth, error in zip(ages, net_worths, errors) if abs(error) <= threshold]
              
              return cleaned_data

          reg = linear_model.LinearRegression()
          reg.fit(ages_train, net_worths_train)

          plt.plot(ages, reg.predict(ages), color='blue')

          # plot all points in blue
          plt.scatter(ages, net_worths, color='blue')

          # plot the current training points in orange
          plt.scatter(ages_train, net_worths_train, color='orange')

          ### identify and remove the most outlier-y points
          predictions = reg.predict(ages_train)
          cleaned_data = outlierCleaner( predictions, ages_train, net_worths_train )


          ### only run this code if cleaned_data is returning data
          if len(cleaned_data) > 0:
              # the non-outlier ages, net worths, and errors
              ages_train2, net_worths_train2, errors_train2 = zip(*cleaned_data)
              ages_train2       = numpy.reshape( numpy.array(ages_train2), (len(ages_train2), 1))
              net_worths_train2 = numpy.reshape( numpy.array(net_worths_train2), (len(net_worths_train2), 1))

              # refit the cleaned data
              reg2 = linear_model.LinearRegression()
              reg2.fit(ages_train2, net_worths_train2)
              plt.plot(ages, reg2.predict(ages), color='red')
              plt.scatter(ages_train2, net_worths_train2, color='red')
              plt.xlabel("ages")
              plt.ylabel("net worths")

          else:
              print "outlierCleaner() is returning an empty list, no refitting to be done"
              
              
          print 'new slope = {0}'.format(reg2.coef_[0][0])

        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/slope_after_cleaning.png"></span>
        <pre class="comment">
          <code>
            new slope = 6.36859480694
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('outliers-exercise1', 'outliers')"><h3>Exercise 4: Score After Cleaning</h3></a>
    <div ng-if="curr_view==='outliers-exercise4'">
      <h4 class="h4-code">Score After Cleaning</h4>
      <pre>
        <code class="python">
          print 'new score = {0}'.format(reg2.score(ages_test, net_worths_test))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            new score = 0.983189455686
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('outliers-exercise1', 'outliers')"><h3>Exercise 5: Enron Outliers</h3></a>
    <div ng-if="curr_view==='outliers-exercise5'">
      <h4 class="h4-code">Enron Outliers</h4>
      <pre>
        <code class="python">
          from feature_format import featureFormat, targetFeatureSplit

          ### read in data dictionary, convert to numpy array
          data_dict = pickle.load( open("../final_project/final_project_dataset.pkl", "r") )
          features = ["salary", "bonus"]
          data = featureFormat(data_dict, features)

          plt.scatter(data[:,0], data[:,1])
          plt.xlabel("salary")
          plt.ylabel("bonus")

          import pandas as pd
          df = pd.DataFrame(data_dict)
          df.loc['salary',:] = pd.to_numeric(df.loc['salary',:], errors='coerce')
          df.loc['bonus',:] = pd.to_numeric(df.loc['bonus',:], errors='coerce')

          print df.loc['salary',:].idxmax(axis=1)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/enron_outliers.png"></span>
        <pre class="comment">
          <code>
            Outlier name: TOTAL
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('outliers-exercise1', 'outliers')"><h3>Exercise 6: Any More Outliers?</h3></a>
    <div ng-if="curr_view==='outliers-exercise6'">
      <h4 class="h4-code">Any More Outliers?</h4>
      <pre>
        <code class="python">
          data_dict.pop('TOTAL', 0)

          data = featureFormat(data_dict, features)

          plt.scatter(data[:,0], data[:,1])
          plt.xlabel("salary")
          plt.ylabel("bonus")
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/any_more_outlier.png"></span>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('outliers-exercise1', 'outliers')"><h3>Exercise 7: Identifying Two More Outliers</h3></a>
    <div ng-if="curr_view==='outliers-exercise7'">
      <h4 class="h4-code">Identifying Two More Outliers</h4>
      <pre>
        <code class="python">
          #print df.columns[name wdf.loc['salary',:] > 1*10**6 and df.loc['bonus',:] > 5*10**6]
          print [name for name in df.columns if df.loc['salary', name] > 10**6 and df.loc['bonus',name] > 5*10**6]
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            ['LAY KENNETH L', 'SKILLING JEFFREY K', 'TOTAL']
          </code>
        </pre>
      </div>
    </div>

  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#clustering">Lesson 8: Clustering</button>
  <div id="clustering" class="collapse">
    <a href="" ng-click="click_view('clustering-exercise1', 'clustering')"><h3>Exercise 1: Clustering Features</h3></a>
    <div ng-if="curr_view==='clustering-exercise1'">
      <h4 class="h4-code">Clustering Features</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/outliers')


          import pickle
          import numpy
          import matplotlib.pyplot as plt
          from feature_format import featureFormat, targetFeatureSplit

          %matplotlib inline



          def Draw(pred, features, poi, mark_poi=True, name="image.png", f1_name="feature 1", f2_name="feature 2"):
              """ some plotting code designed to help you visualize your clusters """

              ### plot each cluster with a different color--add more colors for
              ### drawing more than five clusters
              colors = ["b", "c", "k", "m", "g"]
              for ii, pp in enumerate(pred):
                  plt.scatter(features[ii][0], features[ii][1], color = colors[pred[ii]])

              ### if you like, place red stars over points that are POIs (just for funsies)
              if mark_poi:
                  for ii, pp in enumerate(pred):
                      if poi[ii]:
                          plt.scatter(features[ii][0], features[ii][1], color="r", marker="*")
              plt.xlabel(f1_name)
              plt.ylabel(f2_name)



          ### load in the dict of dicts containing all the data on each person in the dataset
          data_dict = pickle.load( open("../final_project/final_project_dataset.pkl", "r") )
          ### there's an outlier--remove it! 
          data_dict.pop("TOTAL", 0)


          # the features to be used
          features_list = ['poi', 'salary', 'exercised_stock_options']

          def finance_kmeans(data_dict, features_list):
              data = featureFormat(data_dict, features_list )
              poi, finance_features = targetFeatureSplit( data )

              # plot the first 2 features
              for f in finance_features:
                  plt.scatter( f[0], f[1] )

              # k-means clustering
              from sklearn.cluster import KMeans
              clf = KMeans(2)
              clf.fit(finance_features)
              pred = clf.predict(finance_features)

              # show the clustering
              Draw(pred, finance_features, poi, mark_poi=False, name="clusters.pdf", f1_name=features_list[1], f2_name=features_list[2])
              
              return None
              

          finance_kmeans(data_dict, features_list)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/clustering_features.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('clustering-exercise2', 'clustering')"><h3>Exercise 2: Clustering with 3 Features</h3></a>
    <div ng-if="curr_view==='clustering-exercise2'">
      <h4 class="h4-code">Clustering with 3 Features</h4>
      <pre>
        <code class="python">
          features_list = ['poi', 'salary', 'exercised_stock_options', 'total_payments']

          finance_kmeans(data_dict, features_list)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span><img src="img/images/clustering_with_3_features.png"></span>
      </div>
    </div>

    <a href="" ng-click="click_view('clustering-exercise3', 'clustering')"><h3>Exercise 3: Stock Option Range</h3></a>
    <div ng-if="curr_view==='clustering-exercise3'">
      <h4 class="h4-code">Stock Option Range</h4>
      <pre>
        <code class="python">
          import pandas as pd

          df = pd.DataFrame(data_dict)
          df.loc['exercised_stock_options',:] = pd.to_numeric(df.loc['exercised_stock_options',:], errors='coerce')
          print df.loc['exercised_stock_options',:].max(skipna=True)
          print df.loc['exercised_stock_options',:].min(skipna=True)
          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Max : 34348384.0
            Min: 3285.0 
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('clustering-exercise4', 'clustering')"><h3>Exercise 4: Salary Range</h3></a>
    <div ng-if="curr_view==='clustering-exercise4'">
      <h4 class="h4-code">Salary Range</h4>
      <pre>
        <code class="python">
          df.loc['salary',:] = pd.to_numeric(df.loc['salary',:], errors='coerce')
          print df.loc['salary',:].max(skipna=True)
          print df.loc['salary',:].min(skipna=True)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Max : 1111258.0
            Min: 477.0
          </code>
        </pre>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#f_scaling">Lesson 9: Feature Scaling</button>
  <div id="f_scaling" class="collapse">
    <a href="" ng-click="click_view('f_scaling-exercise1', 'f_scaling')"><h3>Exercise 1: Min/Max Scaler in sklearn</h3></a>
    <div ng-if="curr_view==='f_scaling-exercise1'">
      <h4 class="h4-code">Min/Max Scaler in sklearn</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/outliers')


          import numpy as np
          from sklearn.preprocessing import MinMaxScaler

          weights = np.array([[115.], [140.], [175.]])
          scaler = MinMaxScaler()
          rescaled_weight = scaler.fit_transform(weights)
          
        </code>
      </pre>
    </div>

    <a href="" ng-click="click_view('f_scaling-exercise2', 'f_scaling')"><h3>Exercise 2: Computing Rescaled Features</h3></a>
    <div ng-if="curr_view==='f_scaling-exercise2'">
      <h4 class="h4-code">Computing Rescaled Features</h4>
      <pre>
        <code class="python">
          import pickle
          import numpy
          #import matplotlib.pyplot as plt
          from feature_format import featureFormat, targetFeatureSplit

          ### load in the dict of dicts containing all the data on each person in the dataset
          data_dict = pickle.load( open("../final_project/final_project_dataset.pkl", "r") )
          ### there's an outlier--remove it! 
          data_dict.pop("TOTAL", 0)

          # the features to be used
          features_list = ['poi', 'salary', 'exercised_stock_options']

          data = featureFormat(data_dict, features_list)

          _, salary, stock = zip(*data)

          # put the features into 2-D numpy arrays
          salary = np.array(salary).reshape((len(salary),1))
          stock = np.array(stock).reshape((len(stock),1))

          # rescale
          scaler = MinMaxScaler()
          salary = scaler.fit_transform(salary)
          print '$200,000 becomes {0}'.format(scaler.transform([[200000.]])[0][0])

          stock = scaler.fit_transform(stock)
          print '$1,000,000 becomes {0}'.format(scaler.transform([[1000000.]])[0][0])
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            $200,000 becomes 0.179976207145
            $1,000,000 becomes 0.0291134511597
          </code>
        </pre>
      </div>
    </div>


  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#text_learning">Lesson 10: Text Learning</button>
  <div id="text_learning" class="collapse">
    <a href="" ng-click="click_view('text_learning-exercise1', 'text_learning')"><h3>Exercise 1: Bag of Words in sklearn</h3></a>
    <div ng-if="curr_view==='text_learning-exercise1'">
      <h4 class="h4-code">Bag of Words in sklearn</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/text_learning')


          from sklearn.feature_extraction.text import CountVectorizer
          vectorizer = CountVectorizer()

          string1 = '''Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec pharetra ornare lacinia. 
          Cras et facilisis sem. Mauris fermentum nec dui at aliquam. Mauris ante justo, aliquam 
          eget facilisis ac, elementum eget dolor. Nulla lacinia ac lorem vel tempus. Vivamus condimentum 
          vulputate semper. Nullam dictum, mauris dignissim auctor suscipit, dui turpis elementum turpis, 
          et tempor urna diam sed nisl. Vestibulum mollis quam at nisl egestas tincidunt. Nullam ut nibh 
          fringilla, ultricies neque vel, tempor erat. Phasellus vel sem vitae ligula viverra luctus hendrerit 
          ac quam. Vivamus dignissim, diam sed porttitor lacinia, elit erat lobortis tellus, nec euismod dolor turpis a leo.'''

          string2 = '''Mauris felis nibh, tempor ac pulvinar sed, feugiat at neque. In enim elit, venenatis nec magna eu, vestibulum 
          lobortis libero. Nullam scelerisque pulvinar ex consectetur tempor. Morbi congue quis leo auctor facilisis. Mauris 
          et diam ultricies, interdum nisi ac, condimentum turpis. Donec a risus sed dolor blandit ultrices. Nulla ac ultrices 
          elit. Nulla dictum metus tortor, in sollicitudin enim rutrum id. Nulla magna felis, molestie vel odio et, congue ornare 
          nisi. Nunc molestie, mi non blandit sodales, neque diam varius quam, nec tempus metus neque vel nibh. Morbi sit amet 
          sapien nec ipsum feugiat lacinia ut eu orci. Mauris id enim tincidunt, aliquet augue quis, vehicula libero. Donec eu 
          laoreet nibh.'''

          string3 = '''Donec urna massa, faucibus et interdum id, facilisis interdum augue. Nunc enim nulla, tristique sit amet velit 
          in, lacinia mollis mi. Nullam malesuada felis sed libero porttitor dapibus ut quis dolor. Curabitur vitae neque 
          at arcu condimentum suscipit. Quisque sollicitudin est a elit sollicitudin, ac consectetur nisi blandit. Vestibulum 
          rhoncus viverra orci, et porta purus maximus quis. Pellentesque consectetur velit eget orci rutrum mollis. Nullam 
          condimentum vehicula ante at dignissim. Curabitur gravida, lorem in vehicula gravida, enim arcu semper nulla, 
          id tempor magna eros vel tortor.'''

          email_list = [string1, string2, string3]

          bag_of_words = vectorizer.fit_transform(email_list)

          print vectorizer.vocabulary_.get('id')
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>43</span>
      </div>
    </div>

    <a href="" ng-click="click_view('text_learning-exercise2', 'text_learning')"><h3>Exercise 2: Getting Stopwords from NLTK</h3></a>
    <div ng-if="curr_view==='text_learning-exercise2'">
      <h4 class="h4-code">Getting Stopwords from NLTK</h4>
      <pre>
        <code class="python">
          from nltk.corpus import stopwords
          sw = stopwords.words('english')
          print 'Number of stopwords: {0}'.format(len(sw))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Number of stopwords: 153
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('text_learning-exercise3', 'text_learning')"><h3>Exercise 3: Stemming with nltk</h3></a>
    <div ng-if="curr_view==='text_learning-exercise3'">
      <h4 class="h4-code">Stemming with nltk</h4>
      <pre>
        <code class="python">
          from nltk.stem.snowball import SnowballStemmer
          stemmer = SnowballStemmer('english')
          print stemmer.stem('responsiveness')
          print stemmer.stem('responsivity')
          print stemmer.stem('unresponsive')
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            respons
            respons
            unrespons
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('text_learning-exercise4', 'text_learning')"><h3>Exercise 4: Warming Up with parseOutText()</h3></a>
    <div ng-if="curr_view==='text_learning-exercise4'">
      <h4 class="h4-code">Warming Up with parseOutText()</h4>
      <pre>
        <code class="python">
          import string

          def parseOutText(f):
              """ given an opened email file f, parse out all text below the
                  metadata block at the top
                  (in Part 2, you will also add stemming capabilities)
                  and return a string that contains all the words
                  in the email (space-separated) 
                  
                  example use case:
                  f = open("email_file_name.txt", "r")
                  text = parseOutText(f)
                  
                  """


              f.seek(0)  ### go back to beginning of file (annoying)
              all_text = f.read()

              ### split off metadata
              content = all_text.split("X-FileName:")
              words = ""
              if len(content) > 1:
                  ### remove punctuation
                  text_string = content[1].translate(string.maketrans("", ""), string.punctuation)

                  words = text_string
                  
              return words
              

          ff = open("../text_learning/test_email.txt", "r")
          text = parseOutText(ff)
          print text

        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>If you can read this message youre properly using parseOutText  Please proceed to the next part of the project</span>
      </div>
    </div>

    <a href="" ng-click="click_view('text_learning-exercise5', 'text_learning')"><h3>Exercise 5: Deploying Stemming</h3></a>
    <div ng-if="curr_view==='text_learning-exercise5'">
      <h4 class="h4-code">Deploying Stemming</h4>
      <pre>
        <code class="python">
          from nltk.stem.snowball import SnowballStemmer

          def parseOutText(f):
              '''
              Input: a file containing text
              
              Output: the stemmed words in the input text, all separated by a single space
              '''
              f.seek(0)  ### go back to beginning of file (annoying)
              all_text = f.read()

              ### split off metadata
              content = all_text.split("X-FileName:")
              
              # the stemmer
              stemmer = SnowballStemmer('english')
              
              # the string of words
              words = ""
              
              if len(content) > 1:
                  ### remove punctuation
                  text_string = content[1].translate(string.maketrans("", ""), string.punctuation)

                  ### split the text string into individual words, stem each word,
                  ### and append the stemmed word to words (make sure there's a single
                  ### space between each stemmed word)
                  for word in text_string.split():
                      # stem the word and add it to words
                      words += stemmer.stem(word) + ' '       
                  
              return words[:-1]
              

          ff = open("../text_learning/test_email.txt", "r")
          text = parseOutText(ff)
          print text
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>if you can read this messag your proper use parseouttext pleas proceed to the next part of the project</span>
      </div>
    </div>

    <a href="" ng-click="click_view('text_learning-exercise6', 'text_learning')"><h3>Exercise 6: Clean Away "Signature Words"</h3></a>
    <div ng-if="curr_view==='text_learning-exercise6'">
      <h4 class="h4-code">Clean Away "Signature Words"</h4>
      <pre>
        <code class="python">
          import pickle
          from sklearn.feature_extraction.text import TfidfVectorizer

          """
              Starter code to process the emails from Sara and Chris to extract
              the features and get the documents ready for classification.

              The list of all the emails from Sara are in the from_sara list
              likewise for emails from Chris (from_chris)

              The actual documents are in the Enron email dataset, which
              you downloaded/unpacked in Part 0 of the first mini-project. If you have
              not obtained the Enron email corpus, run startup.py in the tools folder.

              The data is stored in lists and packed away in pickle files at the end.
          """

          sw = ["sara", "shackleton", "chris", "germani"]
          with open("from_sara.txt", "r") as from_sara, open("from_chris.txt", "r") as from_chris:

              from_data = []
              word_data = []

              ### temp_counter is a way to speed up the development--there are
              ### thousands of emails from Sara and Chris, so running over all of them
              ### can take a long time
              ### temp_counter helps you only look at the first 200 emails in the list so you
              ### can iterate your modifications quicker
              temp_counter = 0


              for name, from_person in [("sara", from_sara), ("chris", from_chris)]:
                  for path in from_person:
                      ### only look at first 200 emails when developing
                      ### once everything is working, remove this line to run over full dataset
                      
                      #temp_counter += 1
                      if temp_counter < 200:
                          path = os.path.join('..', path[:-1])

                          with open(path, 'r') as email:
                              ### use parseOutText to extract the text from the opened email
                              text = parseOutText(email)

                              ### use str.replace() to remove any instances of the words
                              ### ["sara", "shackleton ", "chris", "germani"]
                              for word in sw:
                                  if(word in text):
                                      text = text.replace(word, "")

                              ### append the text to word_data
                              word_data.append(text.replace('\n',' ').strip())

                              ### append a 0 to from_data if email is from Sara, and 1 if email is from Chris
                              if name=='sara':
                                  from_data.append(0)
                              else:
                                  from_data.append(1)

          pickle.dump( word_data, open("your_word_data.pkl", "w") )
          pickle.dump( from_data, open("your_email_authors.pkl", "w") )

          print word_data[152]

          # word data is a list of strings that we get by stemming the emails
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>tjonesnsf stephani and sam need nymex calendar</span>
      </div>
    </div>

    <a href="" ng-click="click_view('text_learning-exercise7', 'text_learning')"><h3>Exercise 7: TfIdf it</h3></a>
    <div ng-if="curr_view==='text_learning-exercise7'">
      <h4 class="h4-code">TfIdf it</h4>
      <pre>
        <code class="python">
          ### in Part 4, do TfIdf vectorization here
          vectorizer = TfidfVectorizer(stop_words="english", lowercase=True)
          vectorizer.fit_transform(word_data)

          feature_names = vectorizer.get_feature_names()

          print 'Number of different words: {0}'.format(len(feature_names))

          
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Number of different words: 38757
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('text_learning-exercise8', 'text_learning')"><h3>Exercise 8: Accessing TfIdf features</h3></a>
    <div ng-if="curr_view==='text_learning-exercise8'">
      <h4 class="h4-code">Accessing TfIdf features</h4>
      <pre>
        <code class="python">
          print feature_names[34597]
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>stephaniethank</span>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#feature_selection">Lesson 11: Feature Selection</button>
  <div id="feature_selection" class="collapse">
    <a href="" ng-click="click_view('feature_selection-exercise1', 'feature_selection')"><h3>Exercise 1: Number of Features and Overfitting</h3></a>
    <div ng-if="curr_view==='feature_selection-exercise1'">
      <h4 class="h4-code">Number of Features and Overfitting</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/feature_selection')
        </code>
      </pre>
      <pre>
        <code class="python">
          import pickle
          import numpy
          numpy.random.seed(42)


          words_file = "../text_learning/your_word_data.pkl" 
          authors_file = "../text_learning/your_email_authors.pkl"
              
          def my_func(words_file, authors_file):
              '''
              I will use this code later in the lesson so I made it a function
              '''
              
              ### The words (features) and authors (labels), already largely processed.
              ### These files should have been created from the previous (Lesson 10)
              ### mini-project.
              word_data = pickle.load( open(words_file, "r"))
              authors = pickle.load( open(authors_file, "r") )



              ### test_size is the percentage of events assigned to the test set (the
              ### remainder go into training)
              ### feature matrices changed to dense representations for compatibility with
              ### classifier functions in versions 0.15.2 and earlier
              from sklearn import cross_validation
              features_train, features_test, labels_train, labels_test = cross_validation.train_test_split(word_data, authors, test_size=0.1, random_state=42)

              from sklearn.feature_extraction.text import TfidfVectorizer
              vectorizer = TfidfVectorizer(sublinear_tf=True, max_df=0.5,
                                           stop_words='english')
              features_train = vectorizer.fit_transform(features_train)
              features_test  = vectorizer.transform(features_test).toarray()


              ### a classic way to overfit is to use a small number
              ### of data points and a large number of features;
              ### train on only 150 events to put ourselves in this regime
              features_train = features_train[:150].toarray()
              labels_train   = labels_train[:150]


              from sklearn.tree import DecisionTreeClassifier

              clf = DecisionTreeClassifier()
              clf.fit(features_train, labels_train)
              
              return clf, vectorizer, features_train, features_test, labels_train, labels_test


          (clf, vectorizer, features_train, features_test, labels_train, labels_test) = my_func(words_file, authors_file)

          print 'Number of training points = {0}'.format(len(features_train))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Number of training points = 150
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('feature_selection-exercise1', 'feature_selection')"><h3>Exercise 2: Accuracy of Your Overfit Decision Tree</h3></a>
    <div ng-if="curr_view==='feature_selection-exercise2'">
      <h4 class="h4-code">Accuracy of Your Overfit Decision Tree</h4>
      <pre>
        <code class="python">
          print 'Accuracy on test set = {0}'.format(clf.score(features_test, labels_test))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Accuracy on test set = 0.947667804323
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('feature_selection-exercise1', 'feature_selection')"><h3>Exercise 3: Identify the Most Powerful Features and Use TfIdf to Get the Most Important Word</h3></a>
    <div ng-if="curr_view==='feature_selection-exercise3'">
      <h4 class="h4-code">Identify the Most Powerful Features and Use TfIdf to Get the Most Important Word</h4>
      <pre>
        <code class="python">
          top_features = [(number, feature, vectorizer.get_feature_names()[number]) for number, feature in 
            zip(range(len(clf.feature_importances_)), clf.feature_importances_) if feature > 0.2]
          print top_features
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>[(33614, 0.76470588235294124, u'sshacklensf')]</span>
      </div>
    </div>

    <a href="" ng-click="click_view('feature_selection-exercise1', 'feature_selection')"><h3>Exercise 4: Re-Process the Text</h3></a>
    <div ng-if="curr_view==='feature_selection-exercise4'">
      <h4 class="h4-code">Re-Process the Text</h4>
      <pre>
        <code class="python">
          import string
          from nltk.stem.snowball import SnowballStemmer

          def parseOutText(f):
              '''
              Input: a file containing text
              
              Output: the stemmed words in the input text, all separated by a single space
              '''
              f.seek(0)  ### go back to beginning of file (annoying)
              all_text = f.read()

              ### split off metadata
              content = all_text.split("X-FileName:")
              
              # the stemmer
              stemmer = SnowballStemmer('english')
              
              # the string of words
              words = ""
              
              if len(content) > 1:
                  ### remove punctuation
                  text_string = content[1].translate(string.maketrans("", ""), string.punctuation)

                  ### split the text string into individual words, stem each word,
                  ### and append the stemmed word to words (make sure there's a single
                  ### space between each stemmed word)
                  for word in text_string.split():
                      # stem the word and add it to words
                      words += stemmer.stem(word) + ' '       
                  
              return words[:-1]
              

          ff = open("../text_learning/test_email.txt", "r")
          text = parseOutText(ff)
        </code>
      </pre>
      <pre>
        <code class="python">
          from sklearn.feature_extraction.text import TfidfVectorizer

          """
              Starter code to process the emails from Sara and Chris to extract
              the features and get the documents ready for classification.

              The list of all the emails from Sara are in the from_sara list
              likewise for emails from Chris (from_chris)

              The actual documents are in the Enron email dataset, which
              you downloaded/unpacked in Part 0 of the first mini-project. If you have
              not obtained the Enron email corpus, run startup.py in the tools folder.

              The data is stored in lists and packed away in pickle files at the end.
          """

          def sara_and_chris(sw):
              '''
              I'm going to reuse this code later so I'm making it a function
              '''
              
              with open("../text_learning/from_sara.txt", "r") as from_sara, open("../text_learning/from_chris.txt", "r") as from_chris:

                  from_data = []
                  word_data = []

                  ### temp_counter is a way to speed up the development--there are
                  ### thousands of emails from Sara and Chris, so running over all of them
                  ### can take a long time
                  ### temp_counter helps you only look at the first 200 emails in the list so you
                  ### can iterate your modifications quicker
                  temp_counter = 0


                  for name, from_person in [("sara", from_sara), ("chris", from_chris)]:
                      for path in from_person:
                          ### only look at first 200 emails when developing
                          ### once everything is working, remove this line to run over full dataset

                          #temp_counter += 1
                          if temp_counter < 200:
                              path = os.path.join('..', path[:-1])

                              with open(path, 'r') as email:
                                  ### use parseOutText to extract the text from the opened email
                                  text = parseOutText(email)

                                  ### use str.replace() to remove any instances of the words
                                  ### ["sara", "shackleton ", "chris", "germani"]
                                  for word in sw:
                                      if(word in text):
                                          text = text.replace(word, "")

                                  ### append the text to word_data
                                  word_data.append(text.replace('\n',' ').strip())

                                  ### append a 0 to from_data if email is from Sara, and 1 if email is from Chris
                                  if name=='sara':
                                      from_data.append(0)
                                  else:
                                      from_data.append(1)

              pickle.dump( word_data, open("your_word_data.pkl", "w") )
              pickle.dump( from_data, open("your_email_authors.pkl", "w") )
              
              return None


          sw = ["sara", "shackleton", "chris", "germani", "sshacklensf"]
          sara_and_chris(sw)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
      </div>
    </div>

    <a href="" ng-click="click_view('feature_selection-exercise1', 'feature_selection')"><h3>Exercise 5: Re-Fit the Model and Find the Outlier</h3></a>
    <div ng-if="curr_view==='feature_selection-exercise5'">
      <h4 class="h4-code">Re-Fit the Model and Find the Outlier</h4>
      <pre>
        <code class="python">
          words_file = 'your_word_data.pkl'
          authors_file = 'your_email_authors.pkl'

          (clf, vectorizer, features_train, features_test, labels_train, labels_test) = my_func(words_file, authors_file)

          top_features = [(number, feature, vectorizer.get_feature_names()[number]) for number, feature in 
                          zip(range(len(clf.feature_importances_)), clf.feature_importances_) if feature > 0.2]
          print top_features
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>[(14343, 0.66666666666666674, u'cgermannsf')]</span>
      </div>
    </div>

    <a href="" ng-click="click_view('feature_selection-exercise1', 'feature_selection')"><h3>Exercise 6: Accuracy of the Overfit Tree</h3></a>
    <div ng-if="curr_view==='feature_selection-exercise6'">
      <h4 class="h4-code">Accuracy of the Overfit Tree</h4>
      <pre>
        <code class="python">
          # remove the 2 outlier words
          sw = ["sara", "shackleton", "chris", "germani", "sshacklensf", "cgermannsf"]
          sara_and_chris(sw)

          # re-fit the tree
          words_file = 'your_word_data.pkl'
          authors_file = 'your_email_authors.pkl'
          (clf, vectorizer, features_train, features_test, labels_train, labels_test) = my_func(words_file, authors_file)

          print 'Accuracy on test set = {0}'.format(clf.score(features_test, labels_test))
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            Accuracy on test set = 0.816268486917
          </code>
        </pre>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#pca">Lesson 12: PCA</button>
  <div id="pca" class="collapse">
    <a href="" ng-click="click_view('pca-exercise1', 'pca')"><h3>Exercise 1: Explained Variance of Each PC</h3></a>
    <div ng-if="curr_view==='pca-exercise1'">
      <h4 class="h4-code">Explained Variance of Each PC</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/pca')
        </code>
      </pre>

      <pre>
        <code class="python">
          %matplotlib inline

          # code provided with the course
          %run eigenfaces.py
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            ===================================================
            Faces recognition example using eigenfaces and SVMs
            ===================================================

            The dataset used in this example is a preprocessed excerpt of the
            "Labeled Faces in the Wild", aka LFW_:

              http://vis-www.cs.umass.edu/lfw/lfw-funneled.tgz (233MB)

              .. _LFW: http://vis-www.cs.umass.edu/lfw/

              original source: http://scikit-learn.org/stable/auto_examples/applications/face_recognition.html


            Total dataset size:
            n_samples: 1288
            n_features: 1850
            n_classes: 7
            Extracting the top 150 eigenfaces from 966 faces
            done in 0.276s
            Projecting the input data on the eigenfaces orthonormal basis
            done in 0.035s
            Fitting the classifier to the training set
            done in 19.882s
            Best estimator found by grid search:
            SVC(C=1000.0, cache_size=200, class_weight='balanced', coef0=0.0,
              decision_function_shape=None, degree=3, gamma=0.001, kernel='rbf',
              max_iter=-1, probability=False, random_state=None, shrinking=True,
              tol=0.001, verbose=False)
            Predicting the people names on the testing set
            done in 0.058s
                               precision    recall  f1-score   support

                 Ariel Sharon       0.50      0.62      0.55        13
                 Colin Powell       0.76      0.88      0.82        60
              Donald Rumsfeld       0.73      0.70      0.72        27
                George W Bush       0.92      0.87      0.89       146
            Gerhard Schroeder       0.77      0.80      0.78        25
                  Hugo Chavez       0.75      0.60      0.67        15
                   Tony Blair       0.88      0.83      0.86        36

                  avg / total       0.83      0.83      0.83       322

            [[  8   0   3   2   0   0   0]
             [  2  53   1   3   0   1   0]
             [  4   1  19   2   0   0   1]
             [  1  11   2 127   3   1   1]
             [  0   2   0   1  20   1   1]
             [  0   2   0   1   2   9   1]
             [  1   1   1   2   1   0  30]]

             Predicted Images
             <img src="/img/images/predicted_face_recog.png">

             Eigen Faces
             <img src="img//images/predicted_face_eigen_faces.png">
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('pca-exercise2', 'pca')"><h3>Exercise 2: F1 Score vs. No. of PCs Used</h3></a>
    <div ng-if="curr_view==='pca-exercise2'">
      <h4 class="h4-code">F1 Score vs. No. of PCs Used</h4>
      <pre>
        <code class="python">
          for n_components in [10, 15, 25, 50, 100, 250]:
          pca = RandomizedPCA(n_components=n_components, whiten=True).fit(X_train)

          eigenfaces = pca.components_.reshape((n_components, h, w))

          X_train_pca = pca.transform(X_train)
          X_test_pca = pca.transform(X_test)


          # Train a SVM classification model
          param_grid = {
                   'C': [1e3, 5e3, 1e4, 5e4, 1e5],
                    'gamma': [0.0001, 0.0005, 0.001, 0.005, 0.01, 0.1],
                    }
          clf = GridSearchCV(SVC(kernel='rbf', class_weight='balanced'), param_grid)
          clf = clf.fit(X_train_pca, y_train)


          # Quantitative evaluation of the model quality on the test set
          y_pred = clf.predict(X_test_pca)

          if n_components==10:
            print 'n_components' + classification_report(y_test, y_pred, target_names=target_names).split('\n')[0]

          print '{0:12d}'.format(n_components) + classification_report(y_test, y_pred, target_names=target_names).split('\n')[2]
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            n_components                   precision    recall  f1-score   support
                    10     Ariel Sharon       0.14      0.23      0.17        13
                    15     Ariel Sharon       0.45      0.38      0.42        13
                    25     Ariel Sharon       0.53      0.69      0.60        13
                    50     Ariel Sharon       0.62      0.77      0.69        13
                   100     Ariel Sharon       0.67      0.62      0.64        13
                   250     Ariel Sharon       0.60      0.69      0.64        13
          </code>
        </pre>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#validation">Lesson 13: Validation</button>
  <div id="validation" class="collapse">
    <a href="" ng-click="click_view('validation-exercise1', 'validation')"><h3>Exercise 1: Train/Test Split in sklearn</h3></a>
    <div ng-if="curr_view==='validation-exercise1'">
      <h4 class="h4-code">Train/Test Split in sklearn</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/validation')
        </code>
      </pre>
      <pre>
        <code class="python">
          from sklearn import datasets
          from sklearn.svm import SVC
          from sklearn import cross_validation

          iris = datasets.load_iris()
          features = iris.data
          labels = iris.target

          ### set the random_state to 0 and the test_size to 0.4 so
          ### we can exactly check your result
          features_train, features_test, labels_train, labels_test = cross_validation.train_test_split(iris.data, iris.target, test_size=0.4, random_state=0)


          clf = SVC(kernel="linear", C=1.)
          clf.fit(features_train, labels_train)

          print clf.score(features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.966666666667</span>
      </div>
    </div>

    <a href="" ng-click="click_view('validation-exercise2', 'validation')"><h3>Exercise 2: Your First (Overfit) POI Identifier</h3></a>
    <div ng-if="curr_view==='validation-exercise2'">
      <h4 class="h4-code">Your First (Overfit) POI Identifier</h4>
      <pre>
        <code class="python">
          import pickle
          from feature_format import featureFormat, targetFeatureSplit

          data_dict = pickle.load(open("../final_project/final_project_dataset.pkl", "r") )

          ### first element is our labels, any added elements are predictor
          ### features. Keep this the same for the mini-project, but you'll
          ### have a different feature list when you do the final project.
          features_list = ["poi", "salary"]

          data = featureFormat(data_dict, features_list)
          labels, features = targetFeatureSplit(data)


          ### it's all yours from here forward!  
          from sklearn.tree import DecisionTreeClassifier

          clf = DecisionTreeClassifier()
          clf.fit(features,labels)

          clf.score(features,labels)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.98947368421052628</span>
      </div>
    </div>

    <a href="" ng-click="click_view('validation-exercise3', 'validation')"><h3>Exercise 3: Deploying a Training/Testing Regime</h3></a>
    <div ng-if="curr_view==='validation-exercise3'">
      <h4 class="h4-code">Deploying a Training/Testing Regime</h4>
      <pre>
        <code class="python">
          features_train, features_test, labels_train, labels_test = cross_validation.train_test_split(features, labels, test_size=0.3, random_state=42)

          clf.fit(features_train, labels_train)
          clf.score(features_test, labels_test)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.72413793103448276</span>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#evaluation_metrices">Lesson 14: Evaluation Metrices</button>
  <div id="evaluation_metrices" class="collapse">
    <pre>
        <code class="comment">
          
          Recall = P( predict A | truth is A )

          Precision = P( truth is A | predict A )
        </code>
    </pre>

    <a href="" ng-click="click_view('evaluation_metrices-exercise1', 'evaluation_metrices')"><h3>Exercise 1: Applying Metrics to Your POI Identifier</h3></a>
    <div ng-if="curr_view==='evaluation_metrices-exercise1'">
      <h4 class="h4-code">Applying Metrics to Your POI Identifier</h4>
      <pre>
        <code class="python">
          import sys
          sys.path.append("C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/tools/")
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/choose_your_own')
          sys.path.append('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/datasets_questions')

          import os
          os.chdir('C:/Users/Jeff/udacity/Intro_to_Machine_Learning/ud120-projects/evaluation')
        </code>
      </pre>

      <pre>
        <code class="python">
          import pickle
          from feature_format import featureFormat, targetFeatureSplit

          data_dict = pickle.load(open("../final_project/final_project_dataset.pkl", "r") )

          ### add more features to features_list!
          features_list = ["poi", "salary"]

          data = featureFormat(data_dict, features_list)
          labels, features = targetFeatureSplit(data)

          # decision tree code from the previous lesson
          from sklearn.tree import DecisionTreeClassifier
          from sklearn import cross_validation
          from sklearn.metrics import confusion_matrix, precision_score, recall_score, classification_report

          features_train, features_test, labels_train, labels_test = cross_validation.train_test_split(features, labels, test_size=0.3, random_state=42)

          clf = DecisionTreeClassifier()
          clf.fit(features_train, labels_train)

          pred = clf.predict(features_test)

          print confusion_matrix(labels_test, pred)
        </code>
      </pre>
      
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            [[21  4]
            [ 4  0]]
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('evaluation_metrices-exercise2', 'evaluation_metrices')"><h3>Exercise 2: Unpacking Into Precision and Recall</h3></a>
    <div ng-if="curr_view==='evaluation_metrices-exercise2'">
      <h4 class="h4-code">Unpacking Into Precision and Recall</h4>
      <pre>
        <code class="python">
          print precision_score(labels_test, pred)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.0</span>
      </div>

      <pre>
        <code class="python">
          print classification_report(labels_test, pred)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.0</span>
         <pre class="comment">
          <code>
                       precision    recall  f1-score   support

                  0.0       0.84      0.84      0.84        25
                  1.0       0.00      0.00      0.00         4

          avg / total       0.72      0.72      0.72        29

          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('evaluation_metrices-exercise3', 'evaluation_metrices')"><h3>Exercise 3: Recall of Your POI Identifier</h3></a>
    <div ng-if="curr_view==='evaluation_metrices-exercise3'">
      <h4 class="h4-code">Recall of Your POI Identifier</h4>
      <pre>
        <code class="python">
          print recall_score(labels_test, pred)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.0</span>
      </div>
    </div>

    <a href="" ng-click="click_view('evaluation_metrices-exercise4', 'evaluation_metrices')"><h3>Exercise 4: How Many True Positives?</h3></a>
    <div ng-if="curr_view==='evaluation_metrices-exercise4'">
      <h4 class="h4-code">How Many True Positives?</h4>
      <pre>
        <code class="python">
          predictions = [0, 1, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1] 
          true_labels = [0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 0]

          cm = confusion_matrix(true_labels, predictions)

          print cm, '\n'
          print '{0} True positives'.format(cm[1][1])
          print '{0} True negatives'.format(cm[0][0])
          print '{0} False positives'.format(cm[0][1])
          print '{0} False negatives'.format(cm[1][0])
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span></span>
        <pre class="comment">
          <code>
            [[9 3]
             [2 6]] 

            6 True positives
            9 True negatives
            3 False positives
            2 False negatives
          </code>
        </pre>
      </div>
    </div>

    <a href="" ng-click="click_view('evaluation_metrices-exercise5', 'evaluation_metrices')"><h3>Exercise 5: Precision</h3></a>
    <div ng-if="curr_view==='evaluation_metrices-exercise5'">
      <h4 class="h4-code">Precision</h4>
      <pre>
        <code class="python">
          print precision_score(true_labels, predictions)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.666666666667</span>
      </div>
    </div>

    <a href="" ng-click="click_view('evaluation_metrices-exercise6', 'evaluation_metrices')"><h3>Exercise 6: Recall</h3></a>
    <div ng-if="curr_view==='evaluation_metrices-exercise6'">
      <h4 class="h4-code">Recall</h4>
      <pre>
        <code class="python">
          print recall_score(true_labels, predictions)
        </code>
      </pre>
      <div class="code-output">
        <span class='output-title'><b>Output:</b> </span><span>0.75</span>
      </div>
    </div>

  </div>
  <button type="button" class="btn btn-info set-block-b" data-toggle="collapse" data-target="#naive_bayes">Lesson 15: Final Project</button>
  <div id="final_project" class="collapse"></div>
</div>


<!-- <div class="container">
  <div class="row">
    <div class="col-lg-8 col-md-10 mx-auto">
      <p>For those who have seen the Earth from space, and for the hundreds and perhaps thousands more who will, the experience most certainly changes your perspective. The things that we share in our world are far more valuable than those which divide us.</p>

      <h2 class="section-heading">The Final Frontier</h2>

      <p> </p>
      <blockquote class="blockquote">The dreams of yesterday are the hopes of today and the reality of tomorrow. Science has not yet mastered prophecy. We predict too much for the next year and yet far too little for the next ten.</blockquote>
      <h2 class="section-heading">Reaching for the Stars</h2>

      <p> has to change a man.</p>

      <span class="caption text-muted">To go places and do things that have never been done before – that’s what living is all about.</span>
    </div>
  </div>
</div> -->
